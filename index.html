<!DOCTYPE html>
<html>

<body>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css">
    <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.3/socket.io.js" crossorigin="anonymous"></script>
    <script rel="stylesheet" href="style.css" crossorigin="anonymous"></script>

    <div class="demo-card-wide mdl-card mdl-shadow--2dp">
        <div class="mdl-card__title">
            <h2 class="mdl-card__title-text">Welcome</h2>
        </div>
        <div>

            <h1>Manual Control</h1>
            <div id="servoControl"></div>

            <!-- <div id="zone_joystick">

                <div id="debug">
                    <ul>
                        <li class="position">
                            position :
                            <ul>
                                <li class="x">x : <span class='data'></span></li>
                                <li class="y">y : <span class='data'></span></li>
                            </ul>
                        </li>
                        <li class="force">force : <span class='data'></span></li>
                        <li class="pressure">pressure : <span class='data'></span></li>
                        <li class="distance">distance : <span class='data'></span></li>
                        <li class="angle">
                            angle :
                            <ul>
                                <li class="radian">radian : <span class='data'></span></li>
                                <li class="degree">degree : <span class='data'></span></li>
                            </ul>
                        </li>
                        <li class="direction">
                            direction :
                            <ul>
                                <li class="x">x : <span class='data'></span></li>
                                <li class="y">y : <span class='data'></span></li>
                                <li class="angle">angle : <span class='data'></span></li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div> -->

            <!-- include socket.io client side script -->
            <script>
                var socket = io(); //load socket.io-client and connect to the host that serves the page
                window.addEventListener("load", function () { //when page loads
                    socket.on('send servoDefinitions', function (data) { //get button status from client
                        console.log(data);
                        data.forEach(function (servoDefinition) {
                            var container = document.getElementById("servoControl");
                            var label = document.createElement("h3");
                            label.innerHTML = servoDefinition.description;
                            container.appendChild(label);
                            var slider = document.createElement("input");
                            slider.type = "range";
                            slider.min = servoDefinition.minValue;
                            slider.max = servoDefinition.maxValue;
                            slider.value = servoDefinition.currentPosition;
                            slider.addEventListener("input", function () {
                                socket.emit(servoDefinition.description, Number(this.value));
                            });
                            container.appendChild(slider);
                        });
                    });
                });
            </script>
        </div>
</body>

</html>